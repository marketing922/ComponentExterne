<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Compte à rebours</title>

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 120px;
            /* 固定高度，方便 iframe 自己适配 */
            font-family: Arial, sans-serif;
        }

        /* 让 countdown.js 生成的块在 iframe 里居中 */
        .countdown {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>

    <script>
        // 1. 先解析 URL 里的 date
        const params = new URLSearchParams(window.location.search);
        const targetDateStr = params.get("date") || "2025-12-31T23:59:59";

        // 2. 先在 DOM 里放好容器
        const countdownDiv = document.createElement("div");
        countdownDiv.className = "countdown";
        countdownDiv.setAttribute("data-target-date", targetDateStr);
        // 我们先不把它塞进 <body>，因为 <body> 还没解析到；
        // 我们先存到 window 上，等 DOM ready 后再插进去。
        window.__countdownDiv = countdownDiv;

        // 3. 等 DOM 完成后，把容器加到 body，然后再加载脚本
        document.addEventListener("DOMContentLoaded", function () {
            // 把倒计时容器插入 body
            document.body.appendChild(window.__countdownDiv);

            // 动态加 <script src=".../countdown.js">
            const script = document.createElement("script");
            script.src = "https://marketing922.github.io/ComponentExterne/countdown.js";
            document.body.appendChild(script);
        });
    </script>
</head>

<body>
    <!-- body 先是空的，实际内容会在 DOMContentLoaded 时插入 -->
</body>

</html>